[SERVICE]
    Daemon          false
    Http_Server     true
    Log_Level       trace
    Parsers_File    custom-parsers.conf
    Parsers_File    /fluent-bit/etc/parsers.conf

[INPUT]
    Name        tcp
    Listen      0.0.0.0
    Port        5170
    Chunk_Size  32
    Buffer_Size 64
    Format      none
    Tag         youtoo.*

[FILTER]
    Name parser
    Key_Name log
    Match youtoo.*
    Parser youtoo-json

[FILTER]
    Name     throttle
    Match    *
    Rate     5000
    Window   30
    Interval 1s

[OUTPUT]
    Name                      gelf
    Match                     youtoo.*
    Host                      seq-input-gelf
    Port                      12201
    Mode                      udp
    Gelf_Short_Message_Key    message
    Gelf_Timestamp_Key        @t
    Gelf_Full_Message_Key     message
    net.connect_timeout       90
    net.dns.mode              UDP
    net.dns.resolver          LEGACY
    net.keepalive off

# [OUTPUT]
#     Name            opensearch
#     Match           youtoo.*
#     Host            opensearch
#     Port            9200
#     Index           logs
#     Type            _doc
#     Time_Key        time
#     Time_Key_Format %Y-%m-%dT%H:%M:%S.%LZ
#     Replace_Dots    On
#     Aws_Auth        Off
#     # Logstash_Format On
#     net.connect_timeout       90
#     net.dns.mode              TCP
#     net.dns.resolver          ASYNC
#     net.keepalive off

# [OUTPUT]
#     Name  stdout
#     Match youtoo.*
